import{H as p,I as N,J as l,K as R,M as v,N as m,O as d,Q as A,R as S,T as k,U as w,V as E,W as M,X as D,Y as I,Z as y,_ as F,$ as O,a0 as g,a1 as x,a2 as H,a3 as T,a4 as U,a5 as Y,s as B,a6 as C,a as $}from"./BlFsqIAo.js";class J{anchor;#s=new Map;#t=new Map;#e=new Map;#a=new Set;#r=!0;constructor(s,t=!0){this.anchor=s,this.#r=t}#i=()=>{var s=p;if(this.#s.has(s)){var t=this.#s.get(s),e=this.#t.get(t);if(e)N(e),this.#a.delete(t);else{var r=this.#e.get(t);r&&(this.#t.set(t,r.effect),this.#e.delete(t),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),e=r.effect)}for(const[a,f]of this.#s){if(this.#s.delete(a),a===s)break;const n=this.#e.get(f);n&&(l(n.effect),this.#e.delete(f))}for(const[a,f]of this.#t){if(a===t||this.#a.has(a))continue;const n=()=>{if(Array.from(this.#s.values()).includes(a)){var o=document.createDocumentFragment();S(f,o),o.append(v()),this.#e.set(a,{effect:f,fragment:o})}else l(f);this.#a.delete(a),this.#t.delete(a)};this.#r||!e?(this.#a.add(a),R(f,n,!1)):n()}}};#n=s=>{this.#s.delete(s);const t=Array.from(this.#s.values());for(const[e,r]of this.#e)t.includes(e)||(l(r.effect),this.#e.delete(e))};ensure(s,t){var e=p,r=k();if(t&&!this.#t.has(s)&&!this.#e.has(s))if(r){var a=document.createDocumentFragment(),f=v();a.append(f),this.#e.set(s,{effect:m(()=>t(f)),fragment:a})}else this.#t.set(s,m(()=>t(this.anchor)));if(this.#s.set(e,s),r){for(const[n,c]of this.#t)n===s?e.unskip_effect(c):e.skip_effect(c);for(const[n,c]of this.#e)n===s?e.unskip_effect(c.effect):e.skip_effect(c.effect);e.oncommit(this.#i),e.ondiscard(this.#n)}else d&&(this.anchor=A),this.#i()}}function L(i,s,t=!1){var e;d&&(e=A,E());var r=new J(i),a=t?M:0;function f(n,c){if(d){var o=D(e),u;if(o===I?u=0:o===y?u=!1:u=parseInt(o.substring(1)),n!==u){var b=F();O(b),r.anchor=b,g(!1),r.ensure(n,c),g(!0);return}}r.ensure(n,c)}w(()=>{var n=!1;s((c,o=0)=>{n=!0,f(o,c)}),n||f(!1,null)},a)}let h=!1,_=Symbol();function P(i,s,t){const e=t[s]??={store:null,source:U(void 0),unsubscribe:T};if(e.store!==i&&!(_ in t))if(e.unsubscribe(),e.store=i??null,i==null)e.source.v=void 0,e.unsubscribe=T;else{var r=!0;e.unsubscribe=Y(i,a=>{r?e.source.v=a:B(e.source,a)}),r=!1}return i&&_ in t?C(i):$(e.source)}function Q(){const i={};function s(){x(()=>{for(var t in i)i[t].unsubscribe();H(i,_,{enumerable:!1,value:!0})})}return[i,s]}function V(i){var s=h;try{return h=!1,[i(),h]}finally{h=s}}export{J as B,Q as a,V as c,L as i,P as s};
